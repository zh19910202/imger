# Auxis - 标注平台助手扩展

Auxis 是一个为腾讯QLabel标注平台设计的Chrome扩展，提供快捷键操作和AI图像处理功能。

## 功能特性

### ⌨️ 快捷键操作
- **D键** - 快捷下载图片
- **空格键** - 点击"跳过"按钮
- **S键** - 点击"提交并继续标注"按钮
- **A键** - 点击"上传图片"按钮
- **F键** - 点击"查看历史"链接
- **X键** - 点击"标记无效"按钮（自动确认弹窗）
- **F1键** - 批量标记无效（连续执行X键功能）
- **W键** - 智能图片对比功能
- **Z键** - 切换调试模式
- **T键** - 测试设备指纹读取并验证卡密

### 🤖 AI图像处理 (RunningHub集成)
- **R键** - AI图像处理功能
  - 自动检查图片尺寸（必须是8的倍数）
  - 上传图片到RunningHub进行AI处理
  - 轮询任务状态并显示结果
  - 支持查看大图、下载和应用生成结果

### 📊 智能对比功能
- 自动检测原图和上传图片
- 多种对比模式（并排、滑动、闪烁）
- 尺寸信息显示和对比分析

### 🔧 调试和配置
- 调试面板显示详细状态信息
- 可配置的音效开关
- 可配置的自动对比开关
- 可配置的F1键执行间隔和次数限制

## 卡密验证功能

### 功能说明
Auxis扩展现在支持设备指纹读取和卡密验证功能，确保只有授权用户可以使用扩展的高级功能。

### 工作原理
1. **设备指纹读取** - 通过Native Host程序读取本地设备指纹文件
2. **卡密验证** - 将设备指纹发送到远程验证服务器进行验证
3. **结果处理** - 根据验证结果决定是否允许使用扩展功能

### 验证API
- **端点**: `http://124.222.206.147:1145/api/Cardkey/ValidateCardkeyByFigId`
- **方法**: GET
- **参数**: `figId` - 设备指纹
- **成功响应**:
  ```json
  {
    "KeyStatus": true,
    "Message": "卡密有效",
    "RemainingDays": 67
  }
  ```
- **失败响应**:
  ```json
  {
    "KeyStatus": false,
    "Message": "卡密已过期"
  }
  ```

### 本地缓存
- 验证结果会缓存24小时以减少网络请求
- 网络错误时会使用过期的缓存数据作为降级方案

## 项目结构

```
auxis/
├── background.js                  # 扩展后台脚本
├── content.js                     # 页面内容脚本
├── popup.html                     # 扩展弹窗界面
├── popup.js                       # 扩展弹窗脚本
├── cardkey-validator.js           # 卡密验证器
├── resource-extractor.js          # 资源提取器
├── native_host.py                 # Native Host程序
├── manifest.json                  # 扩展配置文件
├── runninghub-config.json         # RunningHub配置
├── notification.mp3               # 通知音效
├── icon.png                       # 扩展图标
├── test-cardkey.html              # 卡密验证测试页面
└── README.md                      # 项目说明文档
```

## 安装和使用

### 1. 安装Native Host
```bash
# Windows
install_native_host.bat

# macOS/Linux
# 需要手动配置Native Host清单文件
```

### 2. 加载扩展
1. 打开Chrome浏览器
2. 访问 `chrome://extensions/`
3. 启用"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择auxis项目目录

### 3. 配置扩展
1. 点击扩展图标打开设置页面
2. 根据需要调整各项设置
3. 确保音效文件和配置文件正确加载

## 开发指南

### 添加新功能
1. 在`content.js`中实现页面交互逻辑
2. 在`background.js`中实现后台处理逻辑
3. 在`manifest.json`中添加必要的权限和资源

### 测试卡密验证
使用提供的`test-cardkey.html`测试页面来验证卡密验证功能：
1. 打开`test-cardkey.html`页面
2. 输入设备指纹（例如: ASD21DS）
3. 点击"验证卡密"按钮
4. 查看验证结果

## 故障排除

### 常见问题

1. **快捷键不响应**
   - 确保当前页面是QLabel标注平台
   - 检查扩展是否已启用
   - 查看调试面板了解详细信息

2. **图片下载失败**
   - 检查Native Host是否正确安装
   - 确认系统允许扩展访问文件系统
   - 查看控制台错误信息

3. **AI处理功能异常**
   - 确认RunningHub API Key已正确配置
   - 检查网络连接是否正常
   - 查看任务状态轮询日志

### 调试模式
按Z键可以切换调试模式，调试面板会显示详细的运行状态和日志信息。

## 许可证

MIT License